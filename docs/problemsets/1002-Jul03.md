---
title: Problem set 1002
---

# 2021 Jul 3

[2af7f4ef0cbbd161e76d1f29b2d67186e7e726f0](https://gitlab.com/elijah-team/elijah-lang/-/commit/2af7f4ef0cbbd161e76d1f29b2d67186e7e726f0)

As of this commit (or [actually a few back](https://gitlab.com/elijah-team/elijah-lang/-/commit/25bfc2fe188115d0a918959df81d1c16e1c05325)), `pull-model` builds without errors (passes the CI pipeline).  That means all greens.  But everything isn't peachy though, because there are still errors in the output.  I will be outlining these below.  There is no verification for the product of `GenerateC` (our code generator), and this is one thing I have been thinking about today.  Maybe I will create a framework for this so that results can be compared against expectations.  In other words, it will be testable.  Even though [Codecov] (through Jacoco) finally lists code coverage for this branch (which happens to be about 45%, a two percent increase over `genericA`), if you actually look at the tests, you will find very little actual unit teesting.  The vast majority of the coverage comes from actual runs of the compiler.  This code wasn't designed to be tested, it was designed to just run.

But, with all good news comes the bad.  There are two things you should know about this run.

1. `backlink3` seems to be being generated twice. Who knows why.
2. `classInstantiation` (1) is not generated at all because of a failed type check.
   It fails at DeduceTypes2 line 262.
   
So, on to the results!

### listfolders3

#### Main.c

1. `vt1` is not declared.
2. `MainLogic` is not mangled.
3. `main` is UNKNOWN.
4. `ExitCode` is assumed to be a part of MainLogic, and not `ns ''`.
5. `ExitSuccess` is not a part of any class; this is a logic error.

#### MainLogic.c

6. class `MainLogic` is not generated.

#### Prelude.c

7. in `arguments` TTE is not resolved, but is a `USER_CLASS`.
8. `argument_count` is recognized as a member variable, though this could be just an error.
9. Two namespaces (constructors) are generated.

#### Prelude.h

10. All member types fail to include proper Z-codes.

### listfolders4

11. see above for all files. It's basically the same program, but who would've thought it would give the same output?

### wprust.demo.fact

12. `b1` is not declared correctly as a primitive.
13. `a1` and `vt1` are not declared.
14. `a1.isInt` and `a1.toInt` are UNKNOWN.
15. `f1` is not declared correctly as a primitive.
16. `factorial_r` has no `self` argument.
17. `z0println` does not have proper Z-code and is called without wrapping what is supposed to be a primitive.

#### fact1.c

18. `factorial_r`: TTE is not resolved but is `USER_CLASS`.
19. `__MODULE__` namespace is not generated (not sure that it needs to be though).

### classInstantiation2

#### Bar_102.c and .h

20. default constructor is generated twice.
21. named constructor is not genereateed at all.

#### Foo.c and .h

22. default constructor is generated twice.

#### Main.c

23. In declaration and constructor for `Bar` (type 102), compiler fails to resolve Z-code.
24. `z0println` has improper Z-code, and does not wrap (what are supposed to be) primitives.

#### Prelude.c

25. `z104println`: Argument type is not mangled.
26. `z0print` is used instead of `z104print` (djv).
27. Arguments are not wrapped.
28. `z104print`: Argument type is not mangled.
29. `vt1` and `vt2` are not declared. 
30. Uses `z0printable` instead of (at least) `z105printable`.
31. No implementation for `String8` or `C.puts`.
32. `z105printable`: TTE is not resolved but type is `USER_CLASS`.
33. There is no possible body for a signature function, but the output provides one anyway.
34. `box Integer64` type class (struct) is generated, even though it is never used anywhere.

And finally

### backlink3

#### Foo.c and .h

35. default constructor is generated twice.
36. `printIt` is not generated.

#### Main.c

37. Calls `z0printIt` with wrong Z-code.

## Initialization

One thing I forgot was everywhere there was a member variable, it was not initialized in the constructor.

1. backlink3/Foo
2. classInitialization2/Bar and Foo
3. and the Prelude namespaces

This concludes this report. Much work is to be done.
 
